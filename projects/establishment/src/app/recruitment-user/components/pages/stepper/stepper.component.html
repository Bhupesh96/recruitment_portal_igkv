<div
  class="flex flex-col min-h-screen bg-blue-50 font-['Source Sans Pro',sans-serif]"
>
  <!-- Sticky Header -->
  <app-header class="sticky top-0 z-50 bg-white shadow"></app-header>

  <!-- Hero Banner -->
  <header
    class="relative py-10 sm:py-12 flex flex-col items-center justify-center text-white bg-blue-900 overflow-hidden"
  >
    <div
      class="absolute inset-0 z-0 grid grid-cols-6 gap-8 opacity-10 text-white px-6 py-10 pointer-events-none"
    >
      <!-- Decorative SVGs -->
    </div>
    <div class="relative z-10 text-center px-4 sm:px-6 lg:px-8">
      <h1
        class="text-2xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight"
      >
        Complete Your Job Application
      </h1>
      <p
        class="mt-3 sm:mt-4 text-sm sm:text-base md:text-lg lg:text-xl max-w-2xl mx-auto"
      >
        Fill out the step-by-step form to apply for your desired position.
      </p>
    </div>
  </header>

  <section
    class="w-full max-w-[108rem] mx-auto relative z-10 -mt-8 min-w-[320px]"
  >
    <div class="bg-white rounded-lg shadow-lg px-4 sm:px-6 lg:px-8 pt-6 pb-8">
      <!-- Stepper Navigation -->
      <div class="w-full flex justify-center py-4">
        <div class="bg-white px-2 sm:px-4 py-3 w-full max-w-6xl">
          <div
            class="w-full overflow-x-auto sm:overflow-x-visible scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 pb-2"
          >
            <div class="w-auto sm:w-full inline-flex sm:block">
              <div
                class="flex items-center justify-between w-full space-x-3 px-2"
              >
                <ng-container *ngFor="let step of steps; let i = index">
                  <div
                    class="flex items-center space-x-1 cursor-pointer"
                    (click)="goToStep(i + 1)"
                  >
                    <div
                      class="w-6 h-6 rounded-full flex items-center justify-center text-xs font-semibold transition-all duration-300"
                      [ngClass]="{
                        'bg-blue-500 text-white': currentStep === i + 1,
                        'bg-blue-700 text-white': currentStep > i + 1,
                        'bg-blue-200 text-blue-700': currentStep < i + 1
                      }"
                    >
                      {{ i + 1 }}
                    </div>
                    <div
                      class="text-sm font-medium whitespace-nowrap transition-all duration-300"
                      [ngClass]="{
                        'text-blue-700': currentStep === i + 1,
                        'text-blue-800': currentStep > i + 1,
                        'text-blue-500': currentStep < i + 1
                      }"
                    >
                      {{ step }}
                    </div>
                    <div
                      *ngIf="i < steps.length - 1"
                      class="w-4 sm:w-6 h-px border-t border-dotted"
                      [ngClass]="{
                        'border-gray-400': currentStep > i + 1,
                        'border-gray-300': currentStep <= i + 1
                      }"
                    ></div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Form Section -->
      <div class="w-full mt-8">
        <div class="space-y-6">
          <app-step-1
            [hidden]="currentStep !== 1"
            (formData)="updateFormData(1, $event)"
          ></app-step-1>
          <app-step-2
            [hidden]="currentStep !== 2"
            (formData)="updateFormData(2, $event)"
          ></app-step-2>
          <app-step-3
            [hidden]="currentStep !== 3"
            (formData)="updateFormData(3, $event)"
          ></app-step-3>
          <app-step-4
            [hidden]="currentStep !== 4"
            (formData)="updateFormData(4, $event)"
          ></app-step-4>
          <app-step-5
            [hidden]="currentStep !== 5"
            (formData)="updateFormData(5, $event)"
          ></app-step-5>
          <app-step-6
            [hidden]="currentStep !== 6"
            (formData)="updateFormData(6, $event)"
          ></app-step-6>

          <!-- ✅ STEP 7: Final Preview & Submission Component -->
          <app-step-9
            [hidden]="currentStep !== 7"
            (finalSubmitSuccess)="onFinalSubmitSuccess()"
          ></app-step-9>

          <!-- Navigation -->
          <div
            class="flex justify-between items-center mt-4 pt-3 border-t border-gray-200"
          >
            <button
              class="px-4 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 text-sm font-medium rounded-md shadow-sm transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg"
              (click)="prevStep()"
              [disabled]="currentStep === 1"
            >
              ← Back
            </button>
            <button
              class="px-4 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg shadow-sm transition-all duration-200"
              (click)="nextStep()"
            >
              <!-- ✅ Updated button text logic -->
              {{
                currentStep === steps.length
                  ? "Final Submit"
                  : "Save & Continue →"
              }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <app-footer class="w-full"></app-footer>
</div>
