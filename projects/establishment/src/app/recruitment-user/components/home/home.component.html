<div
  class="flex flex-col min-h-screen bg-gray-50 font-['Source Sans Pro',sans-serif]"
>
  <!-- Sticky Header -->
  <app-header class="sticky top-0 z-50 bg-white shadow"></app-header>

  <!-- Main Scrollable Content -->
  <main class="flex-grow">
    <!-- Hero Banner -->
    <header
      class="relative py-10 sm:py-12 flex flex-col items-center justify-center text-white bg-blue-900 overflow-hidden"
    >
      <!-- Icon Pattern Grid Background -->
      <div
        class="absolute inset-0 z-0 grid grid-cols-6 gap-8 sm:gap-10 lg:gap-12 opacity-10 text-white px-6 sm:px-8 py-10 sm:py-12 pointer-events-none"
      >
        <!-- Repeat SVGs in a pattern -->
        <svg
          class="w-8 h-8 sm:w-10 sm:h-10"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            d="M6 2a2 2 0 00-2 2v3h12V4a2 2 0 00-2-2H6zM4 9v7a2 2 0 002 2h8a2 2 0 002-2V9H4z"
          />
        </svg>

        <svg
          class="w-8 h-8 sm:w-10 sm:h-10"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path d="M13 7a3 3 0 11-6 0 3 3 0 016 0zM4 13a4 4 0 118 0H4z" />
        </svg>

        <svg
          class="w-8 h-8 sm:w-10 sm:h-10"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            fill-rule="evenodd"
            d="M5 4a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm4 3a1 1 0 100 2h2a1 1 0 100-2H9z"
            clip-rule="evenodd"
          />
        </svg>

        <!-- Repeat icons to fill the grid -->
        <svg
          class="w-8 h-8 sm:w-10 sm:h-10"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            d="M6 2a2 2 0 00-2 2v3h12V4a2 2 0 00-2-2H6zM4 9v7a2 2 0 002 2h8a2 2 0 002-2V9H4z"
          />
        </svg>

        <svg
          class="w-8 h-8 sm:w-10 sm:h-10"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path d="M13 7a3 3 0 11-6 0 3 3 0 016 0zM4 13a4 4 0 118 0H4z" />
        </svg>

        <svg
          class="w-8 h-8 sm:w-10 sm:h-10"
          fill="currentColor"
          viewBox="0 0 20 20"
        >
          <path
            fill-rule="evenodd"
            d="M5 4a3 3 0 00-3 3v8a3 3 0 003 3h10a3 3 0 003-3V7a3 3 0 00-3-3H5zm4 3a1 1 0 100 2h2a1 1 0 100-2H9z"
            clip-rule="evenodd"
          />
        </svg>
      </div>

      <!-- Header Content -->
      <div class="relative z-10 text-center px-4 sm:px-6 lg:px-8">
        <h1
          class="text-2xl sm:text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight"
        >
          Find Your Next Opportunity
        </h1>
        <p
          class="mt-3 sm:mt-4 text-sm sm:text-base md:text-lg lg:text-xl max-w-2xl mx-auto"
        >
          Connect with top jobs and apply seamlessly through our recruitment
          portal
        </p>

        <!-- Login Button (Mobile Only) -->
        <div class="mt-4 sm:mt-6 sm:hidden">
          <button
            (click)="showLogin = true"
            class="px-4 py-1.5 sm:px-6 sm:py-2 text-sm bg-white text-blue-800 font-semibold rounded-md shadow hover:bg-gray-100 transition"
          >
            Login
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content Section -->
    <section
      class="w-full max-w-[90rem] 2xl:max-w-[100rem] mx-auto px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20 -mt-10 sm:-mt-12 lg:-mt-14 z-10 relative animate-fadeIn min-w-[320px]"
    >
      <!-- Desktop View: Two-Column Layout -->
      <div
        *ngIf="!isMobileView"
        class="grid grid-cols-1 md:grid-cols-1 lg:grid-cols-5 gap-4 md:gap-6 lg:gap-8 xl:gap-10 2xl:gap-12"
      >
        <!-- Left Column: Dropdowns and Posts -->
        <div class="lg:col-span-3 mt-6 lg:mt-8 xl:mt-10">
          <!-- Dropdown Section -->
          <div
            class="bg-white border border-gray-200 rounded-lg shadow-md sm:shadow-lg p-3 sm:p-4 lg:p-6 xl:p-8 2xl:p-10 mb-4 lg:mb-6"
          >
            <div
              class="flex flex-col md:flex-row gap-3 sm:gap-4 lg:gap-6 xl:gap-8"
            >
              <!-- Session Dropdown -->
              <div class="flex flex-col w-full md:w-1/2">
                <label
                  class="text-xs sm:text-sm lg:text-base font-medium text-gray-700 mb-1 flex items-center gap-2"
                >
                  <svg
                    class="h-4 w-4 sm:h-5 sm:w-5 lg:h-5 lg:w-5 xl:h-6 xl:w-6 text-blue-600"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                    />
                  </svg>
                  Session
                </label>
                <select
                  [(ngModel)]="selectedSession"
                  (ngModelChange)="onSessionChange()"
                  class="w-full border border-gray-300 rounded-md px-2 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm lg:text-base bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-600"
                >
                  <option value="" disabled selected>Select a session</option>
                  <option
                    *ngFor="let session of sessions"
                    [value]="session.Academic_Session_Id"
                  >
                    {{ session.Academic_Session_Name_E }}
                  </option>
                </select>
              </div>

              <!-- Advertisement Dropdown -->
              <div class="flex flex-col w-full md:w-1/2">
                <label
                  class="text-xs sm:text-sm lg:text-base font-medium text-gray-700 mb-1 flex items-center gap-2"
                >
                  <svg
                    class="h-4 w-4 sm:h-5 sm:w-5 lg:h-5 lg:w-5 xl:h-6 xl:w-6 text-blue-600"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    />
                  </svg>
                  Advertisement
                </label>
                <select
                  [(ngModel)]="selectedAd"
                  (ngModelChange)="onAdChange()"
                  class="w-full border border-gray-300 rounded-md px-2 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm lg:text-base bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-600"
                >
                  <option value="" disabled selected>
                    Select an advertisement
                  </option>
                  <option
                    *ngFor="let ad of filteredAds"
                    [value]="ad.a_rec_adv_main_id"
                  >
                    {{ ad.advertisment_no }}
                  </option>
                </select>
              </div>
            </div>
          </div>

          <!-- Posts List -->
          <div
            *ngIf="filteredPosts.length > 0"
            class="space-y-2 sm:space-y-3 lg:space-y-4 xl:space-y-6"
          >
            <div
              *ngFor="let post of filteredPosts; let i = index"
              class="bg-white rounded-xl shadow-md sm:shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 animate-fadeIn lg:hover:scale-105 lg:hover:shadow-xl"
              [ngClass]="{
                'shadow-lg sm:shadow-xl z-10': post.expanded
              }"
              [style.animationDelay]="i * 100 + 'ms'"
            >
              <!-- Post Title -->
              <button
                (click)="togglePost(post)"
                class="w-full flex justify-between items-center px-3 py-2 sm:px-4 sm:py-3 lg:px-6 lg:py-4 xl:px-8 xl:py-4 2xl:px-10 2xl:py-5 hover:bg-gray-50 transition"
              >
                <h3
                  class="text-sm sm:text-base md:text-lg lg:text-lg xl:text-xl font-semibold text-blue-800"
                >
                  {{ post.post_name }}
                </h3>
                <svg
                  class="w-4 h-4 sm:w-5 sm:h-5 lg:w-6 lg:h-6 text-gray-500 transform transition-transform duration-200"
                  [ngClass]="{ 'rotate-180': post.expanded }"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>

              <!-- Post Tabs -->
              <div
                *ngIf="post.expanded"
                class="bg-gray-50 px-3 py-2 sm:px-4 sm:py-3 lg:px-6 lg:py-4 xl:px-8 xl:py-4 2xl:px-10 2xl:py-5 border-t border-gray-200"
              >
                <div
                  class="flex flex-wrap gap-2 sm:gap-3 lg:gap-3 xl:gap-4 mb-4"
                >
                  <button
                    *ngFor="let tab of tabsWithoutLogin"
                    (click)="setActiveTab(post, tab)"
                    class="flex items-center gap-2 px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm md:text-sm lg:text-base font-medium rounded-full transition"
                    [ngClass]="{
                      'bg-blue-600 text-white': post.activeTab === tab,
                      'text-gray-600 hover:bg-blue-100 hover:text-blue-600':
                        post.activeTab !== tab
                    }"
                  >
                    <ng-container [ngSwitch]="tab">
                      <svg
                        *ngSwitchCase="'signup'"
                        class="h-3 w-3 sm:h-4 sm:w-4 lg:h-4 lg:w-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 4v16m8-8H4"
                        />
                      </svg>
                      <svg
                        *ngSwitchCase="'news'"
                        class="h-3 w-3 sm:h-4 sm:w-4 lg:h-4 lg:w-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M19 21H5a2 2 0 01-2-2V7h18v12a2 2 0 01-2 2z"
                        />
                      </svg>
                      <svg
                        *ngSwitchCase="'complaint'"
                        class="h-3 w-3 sm:h-4 sm:w-4 lg:h-4 lg:w-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                        />
                      </svg>
                    </ng-container>
                    {{ tab | titlecase }}
                  </button>
                </div>

                <div
                  class="bg-white p-3 sm:p-4 lg:p-5 xl:p-6 2xl:p-8 rounded-md border border-gray-200 text-gray-700 shadow-sm"
                >
                  <ng-container [ngSwitch]="post.activeTab">
                    <div *ngSwitchCase="'signup'">
                      <app-signup
                        *ngIf="showSignup"
                        (loginClicked)="showLoginForm()"
                        [academicSessionId]="selectedSessionId"
                        [advertisementId]="selectedAd"
                        [postCode]="post.post_code"
                      ></app-signup>
                    </div>
                    <div *ngSwitchCase="'news'">
                      <p
                        class="text-xs sm:text-sm lg:text-base leading-relaxed"
                      >
                        Stay updated with the latest news about
                        <strong>{{ post.post_name }}</strong
                        >.
                      </p>
                    </div>
                    <div *ngSwitchCase="'complaint'">
                      <p
                        class="text-xs sm:text-sm lg:text-base leading-relaxed"
                      >
                        Submit feedback or a complaint for
                        <strong>{{ post.post_name }}</strong
                        >.
                      </p>
                    </div>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>

          <!-- Empty State -->
          <div
            *ngIf="selectedSession && selectedAd && filteredPosts.length === 0"
            class="text-center text-gray-500 mt-6 sm:mt-8 text-xs sm:text-sm lg:text-base font-medium animate-fadeIn"
          >
            No jobs found for the selected advertisement. Try a different
            session or advertisement.
          </div>
        </div>

        <!-- Right Column: Login Form -->
        <div class="lg:col-span-2 mt-6 lg:mt-8 xl:mt-10">
          <div
            class="bg-white border border-gray-200 rounded-lg shadow-md sm:shadow-lg p-3 sm:p-4 lg:p-8 xl:p-10 2xl:p-12 min-w-[280px] sticky top-20 sm:top-24"
          >
            <h2
              class="text-base sm:text-lg lg:text-xl xl:text-2xl font-semibold text-gray-800 mb-3 sm:mb-4 lg:mb-6"
            >
              Already have an account?
            </h2>
            <app-login
              (signupClicked)="showSignupForm()"
              (loginSuccess)="handleLoginSuccess()"
            ></app-login>
            <app-stepper *ngIf="isLoggedIn"></app-stepper>
          </div>
        </div>
      </div>

      <!-- Mobile View: Dropdown Behavior -->
      <div
        *ngIf="isMobileView"
        class="bg-white border border-gray-200 rounded-lg shadow-md sm:shadow-lg p-3 sm:p-4 md:p-5 mt-6"
      >
        <ng-container *ngIf="!showLogin; else loginTemplate">
          <!-- Session & Advertisement Dropdowns -->
          <div class="flex flex-col md:flex-row gap-3 sm:gap-4 md:gap-6">
            <!-- Session Dropdown -->
            <div class="flex flex-col w-full md:w-1/2">
              <label
                class="text-xs sm:text-sm font-medium text-gray-700 mb-1 flex items-center gap-2"
              >
                <svg
                  class="h-4 w-4 sm:h-5 sm:w-5 text-blue-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                  />
                </svg>
                Session
              </label>
              <select
                [(ngModel)]="selectedSession"
                (ngModelChange)="onSessionChange()"
                class="w-full border border-gray-300 rounded-md px-2 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-600"
              >
                <option value="" disabled selected>Select a session</option>
                <option
                  *ngFor="let session of sessions"
                  [value]="session.Academic_Session_Id"
                >
                  {{ session.Academic_Session_Name_E }}
                </option>
              </select>
            </div>

            <!-- Advertisement Dropdown -->
            <div class="flex flex-col w-full md:w-1/2">
              <label
                class="text-xs sm:text-sm font-medium text-gray-700 mb-1 flex items-center gap-2"
              >
                <svg
                  class="h-4 w-4 sm:h-5 sm:w-5 text-blue-600"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  />
                </svg>
                Advertisement
              </label>
              <select
                [(ngModel)]="selectedAd"
                (ngModelChange)="onAdChange()"
                class="w-full border border-gray-300 rounded-md px-2 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm bg-white text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-600"
              >
                <option value="" disabled selected>
                  Select an advertisement
                </option>
                <option
                  *ngFor="let ad of filteredAds"
                  [value]="ad.a_rec_adv_main_id"
                >
                  {{ ad.advertisment_no }}
                </option>
              </select>
            </div>
          </div>
        </ng-container>

        <!-- Login Template -->
        <ng-template #loginTemplate>
          <div class="flex items-center mb-3 sm:mb-4">
            <button
              (click)="backToSelection()"
              class="inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-blue-700 bg-white border border-blue-700 rounded-lg hover:bg-blue-700 hover:text-white"
            >
              <svg
                class="w-3 h-3 sm:w-4 sm:h-4"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M15 19l-7-7 7-7"
                />
              </svg>
              Back to Selection
            </button>
          </div>
          <app-login
            *ngIf="showLogin"
            (signupClicked)="showSignupForm()"
            (loginSuccess)="handleLoginSuccess()"
          ></app-login>
          <app-stepper *ngIf="isLoggedIn"></app-stepper>
        </ng-template>
      </div>

      <!-- Posts List for Mobile View -->
      <div
        *ngIf="isMobileView && !showLogin && filteredPosts.length > 0"
        class="mt-4 space-y-2 sm:space-y-3"
      >
        <div
          *ngFor="let post of filteredPosts; let i = index"
          class="bg-white rounded-xl shadow-md sm:shadow-lg border border-gray-200 overflow-hidden transition-all duration-300 animate-fadeIn sm:hover:scale-105 sm:hover:shadow-xl"
          [ngClass]="{
            'shadow-lg sm:shadow-xl z-10': post.expanded
          }"
          [style.animationDelay]="i * 100 + 'ms'"
        >
          <!-- Post Title -->
          <button
            (click)="togglePost(post)"
            class="w-full flex justify-between items-center px-3 py-2 sm:px-4 sm:py-3 md:px-5 md:py-3 hover:bg-gray-50 transition"
          >
            <h3
              class="text-sm sm:text-base md:text-lg font-semibold text-blue-800"
            >
              {{ post.post_name }}
            </h3>
            <svg
              class="w-4 h-4 sm:w-5 sm:h-5 text-gray-500 transform transition-transform duration-200"
              [ngClass]="{ 'rotate-180': post.expanded }"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </button>

          <!-- Post Tabs -->
          <div
            *ngIf="post.expanded"
            class="bg-gray-50 px-3 py-2 sm:px-4 sm:py-3 md:px-5 md:py-3 border-t border-gray-200"
          >
            <div class="flex flex-wrap gap-2 sm:gap-3 mb-4">
              <button
                *ngFor="let tab of tabsWithoutLogin"
                (click)="setActiveTab(post, tab)"
                class="flex items-center gap-2 px-2 py-1 sm:px-3 sm:py-1.5 text-xs sm:text-sm font-medium rounded-full transition"
                [ngClass]="{
                  'bg-blue-600 text-white': post.activeTab === tab,
                  'text-gray-600 hover:bg-blue-100 hover:text-blue-600':
                    post.activeTab !== tab
                }"
              >
                <ng-container [ngSwitch]="tab">
                  <svg
                    *ngSwitchCase="'signup'"
                    class="h-3 w-3 sm:h-4 sm:w-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 4v16m8-8H4"
                    />
                  </svg>
                  <svg
                    *ngSwitchCase="'news'"
                    class="h-3 w-3 sm:h-4 sm:w-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 21H5a2 2 0 01-2-2V7h18v12a2 2 0 01-2 2z"
                    />
                  </svg>
                  <svg
                    *ngSwitchCase="'complaint'"
                    class="h-3 w-3 sm:h-4 sm:w-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
                    />
                  </svg>
                </ng-container>
                {{ tab | titlecase }}
              </button>
            </div>
            <div
              class="bg-white p-3 sm:p-4 md:p-5 rounded-md border border-gray-200 text-gray-700 shadow-sm"
            >
              <ng-container [ngSwitch]="post.activeTab">
                <div *ngSwitchCase="'signup'">
                  <app-signup
                    *ngIf="showSignup"
                    (loginClicked)="showLoginForm()"
                    [academicSessionId]="selectedSessionId"
                    [advertisementId]="selectedAd"
                    [postCode]="post.post_code"
                  ></app-signup>
                </div>
                <div *ngSwitchCase="'news'">
                  <p class="text-xs sm:text-sm md:text-sm leading-relaxed">
                    Stay updated with the latest news about
                    <strong>{{ post.post_name }}</strong
                    >.
                  </p>
                </div>
                <div *ngSwitchCase="'complaint'">
                  <p class="text-xs sm:text-sm md:text-sm leading-relaxed">
                    Submit feedback or a complaint for
                    <strong>{{ post.post_name }}</strong
                    >.
                  </p>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State for Mobile View -->
      <div
        *ngIf="
          isMobileView &&
          !showLogin &&
          selectedSession &&
          selectedAd &&
          filteredPosts.length === 0
        "
        class="text-center text-gray-500 mt-6 sm:mt-8 text-xs sm:text-sm md:text-base font-medium animate-fadeIn"
      >
        No jobs found for the selected advertisement. Try a different session or
        advertisement.
      </div>
    </section>
  </main>

  <!-- Footer -->
  <app-footer class="w-full"></app-footer>
</div>
